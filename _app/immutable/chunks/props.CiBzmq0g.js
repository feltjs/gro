import{b as N,H as O,r as p,c as h,d as b,e as A,E as y,g as U,f as Y,L as k,P as C,s as F,h as o,i as H,j as M,k as $,u as j,l as T,m as w,o as x,q as z}from"./runtime.CFeenShs.js";import{h as B,b as q,d as G}from"./disclose-version.Bpi8mIaG.js";function J(a,f,i,l=null,m=!1){var r=null,u=null,n=null,t=m?y:0;N(()=>{if(n===(n=!!f()))return;let s=!1;if(B){const d=a.data===O;n===d&&(p(G),q(!1),s=!0)}n?(r?h(r):r=b(()=>i(a)),u&&A(u,()=>{u=null})):(u?h(u):l&&(u=b(()=>l(a))),r&&A(r,()=>{r=null})),s&&q(!0)},t)}function K(a,f,i,l){var R;var m=(i&M)!==0,r=(i&$)!==0,u=(i&x)!==0,n=a[f],t=(R=U(a,f))==null?void 0:R.set,s=l,d=!0,S=()=>(u&&d&&(d=!1,s=j(l)),s);n===void 0&&l!==void 0&&(t&&r&&Y(),n=S(),t&&t(n));var _;if(r)_=()=>{var e=a[f];return e===void 0?S():(d=!0,e)};else{var I=(m?T:w)(()=>a[f]);I.f|=k,_=()=>{var e=o(I);return e!==void 0&&(s=void 0),e===void 0?s:e}}if(!(i&C))return _;if(t){var D=a.$$legacy;return function(e,v){return arguments.length>0?((!r||!v||D)&&t(v?_():e),e):_()}}var E=!1,P=z(n),c=T(()=>{var e=_(),v=o(P);return E?(E=!1,v):P.v=e});return m||(c.equals=F),function(e,v){var L=o(c);if(arguments.length>0){const g=v?o(c):e;return c.equals(g)||(E=!0,H(P,g),o(c)),e}return L}}export{J as i,K as p};
